{"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "grafana", "uid": "-- Grafana --"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "description": "Dieses Dashboard visualisiert in Echtzeit den Produktionsprozess, indem es Daten aus verschiedenen Quellen aggregiert und \u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcbersichtlich darstellt. Mithilfe von AR und digitalen Zwillingen k\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00b6nnen relevante Produktionsparameter \u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcberwacht und analysiert werden.  Funktionen:  Synchronisierte Tooltip-Funktion f\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcr eine einfache Analyse von Zeitpunkten \u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcber mehrere Diagramme hinweg. Darstellung von Live- und aggregierten Daten f\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcr wichtige Messgr\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00b6\u00c3\u0192\u00c6\u2019\u00c3\u2026\u00c2\u00b8en wie Spindeldrehzahl und andere produktionsrelevante Parameter. Benutzerfreundliche Visualisierungen zur Identifizierung von Trends und Abweichungen im Produktionsprozess. Dieses Dashboard soll die Entscheidungsfindung unterst\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bctzen und die Effizienz im Produktionsablauf steigern.", "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 2, "id": 1, "links": [], "liveNow": true, "panels": [{"datasource": "influxdb-data-pipeline", "description": "Status des laufenden Programm", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 2, "x": 0, "y": 0}, "id": 4, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "/^status \\{_field=\"value\", _start=\"2024\\-10\\-24 05:00:00 \\+0000 UTC\", _stop=\"2024\\-10\\-24 05:59:00 \\+0000 UTC\", host=\"a9893499e027\", source=\"opcua\\-mcp150/data\", trivial_name=\"Aktive Betriebsart\", unit=\"Enum\\[JOG, MDA, AUTO\\]\"\\}$/", "values": false}, "showPercentChange": false, "textMode": "auto", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"active_operating_mode\")\r\n  |> last()\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      status: if r._value == 2 then \"Aktiv\" else string(v: r._value)\r\n  }))\r\n  |> yield(name: \"mean_active_operating_mode\")\r\n", "refId": "A"}], "title": "Programmstatus", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "Aktives Programm was aktuell Arbeit \n--> muss Manuel ausgew\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00a4hlt werden ", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [{"options": {"2 ": {"index": 0, "text": "AN "}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 2, "x": 2, "y": 0}, "id": 2, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "/^value \\{host=\"a9893499e027\", source=\"opcua\\-mcp150/data\", trivial_name=\"Aktive Betriebsart\", unit=\"Enum\\[JOG, MDA, AUTO\\]\"\\}$/", "values": false}, "showPercentChange": false, "textMode": "auto", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"active_operating_mode\")\r\n  |> last()\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: if r._value == 2 then \"Auto\" else string(v: r._value)\r\n  }))\r\n  |> yield(name: \"mean_active_operating_mode\")\r\n", "refId": "A"}], "title": "Aktivermodus", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "Aktuelle Fehlermeldung", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 2, "x": 4, "y": 0}, "id": 6, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "/^value \\{host=\"a9893499e027\", source=\"opcua\\-mcp150/data\", trivial_name=\"Programmstatus\", unit=\"Enum\\[reset, stop, aktiv, waiting, interrupted\\]\"\\}$/", "values": false}, "showPercentChange": false, "text": {"titleSize": 80}, "textMode": "auto", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"program_status\")\r\n  |> last()\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: if r._value == 0 then \"Keine Fehler\" else string(v: r._value)\r\n  }))\r\n  |> yield(name: \"mean_program_status\")\r\n", "refId": "A"}], "title": "Fehlermeldung", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "Zeigt die aktuelle Zykluszeit des Prozesses in Sekunden an", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}, "unit": "m"}, "overrides": []}, "gridPos": {"h": 5, "w": 3, "x": 6, "y": 0}, "id": 8, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showPercentChange": false, "textMode": "auto", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "editorMode": "code", "expr": "", "legendFormat": "__auto", "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"cycle_time\")\r\n  |> last() \r\n  |> yield(name: \"current_cycle_time\") \r\n\r\n", "range": true, "refId": "A"}], "title": "Zykluszeit", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "Restlaufzeit des verbleibenden Programm ", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}, "unit": "s"}, "overrides": []}, "gridPos": {"h": 5, "w": 3, "x": 9, "y": 0}, "id": 10, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showPercentChange": false, "textMode": "auto", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "editorMode": "code", "expr": "", "legendFormat": "__auto", "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"remaining_time\")\r\n  |> last() // Holt den letzten verf\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcgbaren Datenpunkt\r\n  |> yield(name: \"current_remaining_time\") // Einzigartiger Name f\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcr das Ergebnis\r\n", "range": true, "refId": "A"}], "title": "Restlaufzeit", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "Geschwindigkeit mit der sich die Achsen bewegen", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 3, "x": 12, "y": 0}, "id": 30, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showPercentChange": false, "textMode": "auto", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"feed_unit\")\r\n  |> aggregateWindow(every: 1h, fn: mean)\r\n  |> yield(name: \"mean_feed_unit\")", "refId": "A"}], "title": "Einheit des Vorschub", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "\u00c3\u0192\u00c6\u2019\u00c3\u2026\u00e2\u20ac\u0153berwachung f\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcr die Temperatur des Poliermittel", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}, "unit": "celsius"}, "overrides": [{"matcher": {"id": "byName", "options": "value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Temperatur-Istwert Poliermittel\", unit=\"Degrees Celsius\"}"}, "properties": [{"id": "displayName", "value": "Temperatur"}]}]}, "gridPos": {"h": 5, "w": 3, "x": 15, "y": 0}, "id": 28, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showPercentChange": false, "textMode": "auto", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "editorMode": "code", "expr": "", "legendFormat": "__auto", "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop) // Nutzt den von Grafana vorgegebenen Zeitraum\r\n  |> filter(fn: (r) => r._measurement == \"temperature_polishing_agent_actual\")\r\n  |> aggregateWindow(every: 1h, fn: mean)\r\n  |> yield(name: \"mean_temperature_polishing_agent\") // Einzigartiger Name f\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcr das Ergebnis\r\n", "range": true, "refId": "A"}], "title": "Poliermittel Temperatur", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "Zeigt den Arbeitsdruck als Soll- und Istwert an", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}, "unit": "pressurebar"}, "overrides": [{"matcher": {"id": "byName", "options": "working_pressure_setpoint value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Arbeitsdruck Sollwert\", unit=\"Bar\"}"}, "properties": [{"id": "displayName", "value": "Sollwert"}]}, {"matcher": {"id": "byName", "options": "working_pressure_actual value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Arbeitsdruck Istwert\", unit=\"Bar\"}"}, "properties": [{"id": "displayName", "value": "Istwert"}]}]}, "gridPos": {"h": 5, "w": 6, "x": 18, "y": 0}, "id": 26, "options": {"minVizHeight": 75, "minVizWidth": 75, "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true, "sizing": "auto", "text": {}}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"working_pressure_actual\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_working_pressure_actual\")\r\n\r\n  from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"working_pressure_setpoint\")\r\n  |> last()\r\n  |> yield(name: \"mean_working_pressure_setpoint\")", "refId": "A"}], "title": "Arbeitsdruck ", "type": "gauge"}, {"datasource": "influxdb-data-pipeline", "description": "Soll- und Istwert der Geschwindigkeit der ersten Spindel", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 80}]}, "unit": "none"}, "overrides": [{"matcher": {"id": "byName", "options": "spindle_1_speed_setpoint value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Drehzahl Soll Spindel 1\", unit=\"U/min\"}"}, "properties": [{"id": "displayName", "value": "Sollwert"}]}, {"matcher": {"id": "byName", "options": "spindle_1_speed_actual value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Drehzahl Ist Spindel 1\", unit=\"U/min\"}"}, "properties": [{"id": "displayName", "value": "Istwert"}]}]}, "gridPos": {"h": 5, "w": 6, "x": 0, "y": 5}, "id": 12, "options": {"minVizHeight": 75, "minVizWidth": 75, "orientation": "auto", "reduceOptions": {"calcs": ["last"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true, "sizing": "auto"}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_1_speed_setpoint\")\r\n  |> last()\r\n  |> yield(name: \"mean_spindle_1_speed_setpoint\")\r\n\r\n  from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_1_speed_actual\")\r\n  |> last() // Holt den letzten verf\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcgbaren Datenpunkt\r\n  |> yield(name: \"current_spindle_speed\") // Einzigartiger Name f\u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcr das Ergebnis", "refId": "A"}], "title": "Spindel Geschwindigkeit 1", "type": "gauge"}, {"datasource": "influxdb-data-pipeline", "description": "Auslastung der ersten Spindel", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "max": 100, "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "dark-red", "value": 80}]}, "unit": "percent"}, "overrides": [{"matcher": {"id": "byName", "options": "spindle_1_speed_setpoint value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Drehzahl Soll Spindel 1\", unit=\"U/min\"}"}, "properties": [{"id": "displayName", "value": "Sollwert"}]}, {"matcher": {"id": "byName", "options": "spindle_1_speed_actual value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Drehzahl Ist Spindel 1\", unit=\"U/min\"}"}, "properties": [{"id": "displayName", "value": "Istwert"}]}]}, "gridPos": {"h": 5, "w": 6, "x": 6, "y": 5}, "id": 16, "options": {"minVizHeight": 75, "minVizWidth": 75, "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true, "sizing": "auto"}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_1_utilization\")\r\n  |> last()\r\n  |> yield(name: \"mean_spindle_1_utilization\")", "refId": "A"}], "title": "Spindel Auslastung 1", "type": "gauge"}, {"datasource": "influxdb-data-pipeline", "description": "Aktuelle Position der XYZ-Achsen", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "decimals": 2, "mappings": [], "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}, "unit": "lengthmm"}, "overrides": [{"matcher": {"id": "byName", "options": "position_x_actual value"}, "properties": [{"id": "displayName", "value": "X-Achse"}]}, {"matcher": {"id": "byName", "options": "position_y_actual value"}, "properties": [{"id": "displayName", "value": "Y-Achse"}]}, {"matcher": {"id": "byName", "options": "position_z_actual value"}, "properties": [{"id": "displayName", "value": "Z-Achse"}]}]}, "gridPos": {"h": 5, "w": 9, "x": 12, "y": 5}, "id": 22, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "vertical", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": [], "fields": "", "values": false}, "showPercentChange": false, "text": {"titleSize": 40, "valueSize": 40}, "textMode": "value_and_name", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"position_x_actual\" or r._measurement == \"position_y_actual\" or r._measurement == \"position_z_actual\")\r\n  |> map(fn: (r) => ({\r\n      r with\r\n      _value: if r._measurement == \"position_x_actual\" then r._value + 150.0 else r._value\r\n  }))\r\n  |> aggregateWindow(every: 1m, fn: mean)  // Aggregiert Daten in 1-Minuten-Intervallen und berechnet den Durchschnitt\r\n  |> keep(columns: [\"_time\", \"_value\", \"_field\", \"_measurement\"])\r\n  |> sort(columns: [\"_measurement\"]) // Sortiert die Werte in der Reihenfolge der Achsen\r\n  |> yield(name: \"current_position\")\r\n", "refId": "A"}], "title": "Position XYZ-Achsen", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "Aktueller Stromverbrauch der ersten Spindel ", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}, "unit": "amp"}, "overrides": [{"matcher": {"id": "byName", "options": "spindle_1_current value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom Spindel 1\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Spindel 1"}]}, {"matcher": {"id": "byName", "options": "spindle_2_current value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom Spindel 2\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Spindel 2"}]}]}, "gridPos": {"h": 5, "w": 3, "x": 21, "y": 5}, "id": 20, "options": {"minVizHeight": 75, "minVizWidth": 75, "orientation": "horizontal", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true, "sizing": "auto"}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_1_current\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_spindle_1_current\")", "refId": "A"}], "title": "Stromauslastung Spindel 1", "type": "gauge"}, {"datasource": "influxdb-data-pipeline", "description": "Soll- und Istwert der Geschwindigkeit der zweiten Spindel", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}}, "overrides": [{"matcher": {"id": "byName", "options": "spindle_2_speed_setpoint value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Drehzahl Soll Spindel 2\", unit=\"U/min\"}"}, "properties": [{"id": "displayName", "value": "Sollwert"}]}, {"matcher": {"id": "byName", "options": "spindle_2_speed_actual value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Drehzahl Ist Spindel 2\", unit=\"U/min\"}"}, "properties": [{"id": "displayName", "value": "Istwert"}]}]}, "gridPos": {"h": 5, "w": 6, "x": 0, "y": 10}, "id": 14, "options": {"minVizHeight": 75, "minVizWidth": 75, "orientation": "vertical", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true, "sizing": "auto"}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_2_speed_setpoint\")\r\n  |> last()\r\n  |> yield(name: \"mean_spindle_2_speed_setpoint\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_2_speed_actual\")\r\n  |> last()\r\n  |> yield(name: \"mean_spindle_2_speed_actual\")", "refId": "A"}], "title": "Spindel Geschwindigkeit 2", "type": "gauge"}, {"datasource": "influxdb-data-pipeline", "description": "Auslastung der zweiten Spindel", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "max": 100, "min": 0, "thresholds": {"mode": "percentage", "steps": [{"color": "green"}, {"color": "dark-red", "value": 80}]}, "unit": "percent"}, "overrides": [{"matcher": {"id": "byName", "options": "spindle_2_speed_setpoint value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Drehzahl Soll Spindel 2\", unit=\"U/min\"}"}, "properties": [{"id": "displayName", "value": "Sollwert"}]}, {"matcher": {"id": "byName", "options": "spindle_2_speed_actual value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Drehzahl Ist Spindel 2\", unit=\"U/min\"}"}, "properties": [{"id": "displayName", "value": "Istwert"}]}]}, "gridPos": {"h": 5, "w": 6, "x": 6, "y": 10}, "id": 18, "options": {"minVizHeight": 75, "minVizWidth": 75, "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true, "sizing": "auto"}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_2_utilization\")\r\n  |> last()\r\n  |> yield(name: \"mean_spindle_2_utilization\")\r\n\r\n", "refId": "A"}], "title": "Spindel Auslastung 2", "type": "gauge"}, {"datasource": "influxdb-data-pipeline", "description": "Aktuelle Position der AB-Achsen", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "decimals": 2, "mappings": [], "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}, "unit": "degree"}, "overrides": [{"matcher": {"id": "byName", "options": "position_a_actual value"}, "properties": [{"id": "displayName", "value": "A"}]}, {"matcher": {"id": "byName", "options": "position_b_actual value"}, "properties": [{"id": "displayName", "value": "B"}]}]}, "gridPos": {"h": 5, "w": 9, "x": 12, "y": 10}, "id": 24, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "vertical", "percentChangeColorMode": "standard", "reduceOptions": {"calcs": ["last"], "fields": "", "values": false}, "showPercentChange": false, "text": {"titleSize": 40, "valueSize": 45}, "textMode": "value_and_name", "wideLayout": true}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"position_a_actual\")\r\n  |> aggregateWindow(every: 1m, fn: mean)  // Aggregiert Daten in 1-Minuten-Intervallen und berechnet den Durchschnitt\r\n  |> keep(columns: [\"_time\", \"_value\", \"_field\", \"_measurement\"])\r\n  |> yield(name: \"current_position_a_actual\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"position_b_actual\")\r\n  |> aggregateWindow(every: 1m, fn: mean)  // Aggregiert Daten in 1-Minuten-Intervallen und berechnet den Durchschnitt\r\n  |> keep(columns: [\"_time\", \"_value\", \"_field\", \"_measurement\"])\r\n  |> yield(name: \"current_position_b_actual\")\r\n", "refId": "A"}], "title": "Position AB-Achse", "type": "stat"}, {"datasource": "influxdb-data-pipeline", "description": "Aktueller Stromvrbrauch der zweiten Spindel ", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}, "unit": "amp"}, "overrides": [{"matcher": {"id": "byName", "options": "spindle_1_current value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom Spindel 1\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Spindel 1"}]}, {"matcher": {"id": "byName", "options": "spindle_2_current value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom Spindel 2\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Spindel 2"}]}]}, "gridPos": {"h": 5, "w": 3, "x": 21, "y": 10}, "id": 33, "options": {"minVizHeight": 75, "minVizWidth": 75, "orientation": "horizontal", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true, "sizing": "auto"}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_2_current\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_spindle_2_current\")", "refId": "A"}], "title": "Stromauslastung Spindel 2", "type": "gauge"}, {"datasource": "influxdb-data-pipeline", "description": "Grafische Darstellung der Auslastung der verschiedenen Achsen \u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcber die Zeit", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}, "unit": "percent"}, "overrides": [{"matcher": {"id": "byName", "options": "utilization_y value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Auslastung Y\", unit=\"Percent\"}"}, "properties": [{"id": "displayName", "value": "Y-Achse"}, {"id": "color", "value": {"fixedColor": "yellow", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "utilization_z value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Auslastung Z\", unit=\"Percent\"}"}, "properties": [{"id": "displayName", "value": "Z-Achse"}, {"id": "color", "value": {"fixedColor": "orange", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "utilization_x value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Auslastung X\", unit=\"Percent\"}"}, "properties": [{"id": "displayName", "value": "X-Achse"}, {"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "utilization_a value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Auslastung A\", unit=\"Percent\"}"}, "properties": [{"id": "displayName", "value": "A-Achse"}, {"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "utilization_b value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Auslastung B\", unit=\"Percent\"}"}, "properties": [{"id": "displayName", "value": "B-Achse"}, {"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "utilization_y value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Auslastung Y\", unit=\"Percent\"}"}, "properties": [{"id": "color", "value": {"fixedColor": "purple", "mode": "fixed"}}]}]}, "gridPos": {"h": 7, "w": 12, "x": 0, "y": 15}, "id": 32, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"hideZeros": false, "mode": "single", "sort": "asc"}}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"utilization_x\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_utilization_x\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"utilization_y\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_utilization_y\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"utilization_z\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_utilization_z\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"utilization_a\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_utilization_a\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"utilization_b\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_utilization_b\")", "refId": "A"}], "title": "Auslastung", "type": "timeseries"}, {"datasource": "influxdb-data-pipeline", "description": "Grafische Darstellung der Stromauslastung der Achsen und Spindeln \u00c3\u0192\u00c6\u2019\u00c3\u201a\u00c2\u00bcber die Zeit", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}, "unit": "amp"}, "overrides": [{"matcher": {"id": "byName", "options": "current_x value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom X\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Strom X"}, {"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "current_y value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom Y\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Strom Y"}, {"id": "color", "value": {"fixedColor": "yellow", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "current_z value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom Z\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Strom Z"}, {"id": "color", "value": {"fixedColor": "orange", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "current_a value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom A\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Strom A"}, {"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "current_b value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom B\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Strom B"}, {"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "spindle_1_current value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom Spindel 1\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Strom Spindel 1"}, {"id": "color", "value": {"fixedColor": "text", "mode": "fixed"}}]}, {"matcher": {"id": "byName", "options": "spindle_2_current value {host=\"a9893499e027\", source=\"opcua-mcp150/data\", trivial_name=\"Strom Spindel 2\", unit=\"Ampere\"}"}, "properties": [{"id": "displayName", "value": "Strom Spindel 2"}, {"id": "color", "value": {"fixedColor": "purple", "mode": "fixed"}}]}]}, "gridPos": {"h": 7, "w": 12, "x": 12, "y": 15}, "id": 35, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"hideZeros": false, "mode": "single", "sort": "none"}}, "pluginVersion": "12.0.0", "targets": [{"datasource": {"type": "influxdb", "uid": "P60D0FCC667392E39"}, "query": "from(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"current_x\")\r\n  |> aggregateWindow(every: 1m, fn: last) // Holt den letzten Wert jeder Sekunde\r\n  |> yield(name: \"all_values_current_x_per_second\")\r\n\r\n\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"current_y\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_current_y\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"current_z\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_current_z\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_1_current\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_spindle_1_current\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"spindle_2_current\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_spindle_2_current\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"current_a\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_current_a\")\r\n\r\nfrom(bucket: \"mcp150-opcua\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r._measurement == \"current_b\")\r\n  |> aggregateWindow(every: 1m, fn: mean)\r\n  |> yield(name: \"mean_current_b\")", "refId": "A"}], "title": "Stromauslastung", "type": "timeseries"}, {"datasource": "influxdb-data-pipeline", "fieldConfig": {"defaults": {}, "overrides": []}, "gridPos": {"h": 4, "w": 24, "x": 0, "y": 22}, "id": 36, "options": {"buttonGroup": {"orientation": "center", "size": "md"}, "confirmModal": {"body": "Please confirm to update changed values", "cancel": "Cancel", "columns": {"include": ["name", "oldValue", "newValue"], "name": "Label", "newValue": "New Value", "oldValue": "Old Value"}, "confirm": "Confirm", "elementDisplayMode": "modified", "title": "Confirm update request"}, "elementValueChanged": "", "elements": [{"id": "service_running", "labelWidth": 15, "section": "", "title": "Is Running:", "tooltip": "", "type": "boolean", "uid": "cfb3b171-250d-44f2-998e-671dc6b9c34c", "unit": "", "value": false}], "initial": {"code": "console.log(context.panel.data, context.panel.response, context.panel.initial, context.panel.elements);\n\nreturn;\n\n/**\n * Data Source\n * Requires form elements to be defined\n */\nconst dataQuery = context.utils.toDataQueryResponse(context.panel.response);\nconsole.log(dataQuery);", "contentType": "application/json", "getPayload": "return {}", "highlight": false, "highlightColor": "red", "method": "GET", "payload": {}, "url": "http://host.docker.internal:8002/"}, "layout": {"orientation": "horizontal", "padding": 10, "sectionVariant": "default", "variant": "single"}, "reset": {"backgroundColor": "purple", "foregroundColor": "yellow", "icon": "process", "text": "Reset", "variant": "hidden"}, "resetAction": {"code": "if (context.panel.response) {\n  context.grafana.notifySuccess(['Update', 'Values updated successfully.']);\n  context.grafana.refresh();\n} else {\n  context.grafana.notifyError(['Update', 'An error occurred updating values.']);\n}", "confirm": false, "getPayload": "return {}", "mode": "initial", "payload": {}}, "saveDefault": {"icon": "save", "text": "Save Default", "variant": "hidden"}, "submit": {"backgroundColor": "purple", "foregroundColor": "yellow", "icon": "cloud-upload", "text": "Submit", "variant": "primary"}, "sync": true, "update": {"code": "if (context.panel.response) {\n  context.grafana.notifySuccess(['Update', 'Values updated successfully.']);\n  context.grafana.refresh();\n} else {\n  context.grafana.notifyError(['Update', 'An error occurred updating values.']);\n}", "confirm": false, "contentType": "application/json", "getPayload": "const payload = {};\ncontext.panel.elements.forEach((element) => {\n  if (!element.value) {\n    return;\n  }\n  payload[element.id] = element.value;\n})\nreturn payload;", "method": "PUT", "payload": {}, "payloadMode": "all", "url": "http://host.docker.internal:8002/toggle"}, "updateEnabled": "auto"}, "pluginVersion": "5.1.0", "targets": [{"refId": "A"}], "title": "Start/Stop Service", "type": "volkovlabs-form-panel"}], "preload": false, "refresh": "", "schemaVersion": 41, "tags": [], "templating": {"list": []}, "time": {"from": "2024-10-24T05:00:00.000Z", "to": "2024-10-24T05:59:00.000Z"}, "timepicker": {}, "timezone": "", "title": "MCP-150 Dashboard", "uid": "hS2h85ZHk", "version": 1}